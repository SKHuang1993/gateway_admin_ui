webpackJsonp([1],{"7df6":function(t,e){},BQSP:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),r=a("zL8q"),o=a.n(r),i=(a("tvR6"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var s=a("VU/8")({name:"App"},i,!1,function(t){a("kTnO")},null,null).exports,n=a("/ocq"),c=a("mtWM"),u=a.n(c).a.create({baseURL:"Web/",headers:{}});function d(t){return u({url:"v1/clusters",method:"GET"})}function f(t){return u({url:"v1/apis",method:"PUT",data:t})}var p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("div",{staticClass:"logo"},[t._v("ChangDao Gateway")])]),t._v(" "),a("el-aside",{attrs:{width:"240px"}},[a("ul",{staticClass:"aside_ul"},[a("li",[a("router-link",{attrs:{to:"/",exact:""}},[a("span",{staticClass:"title-icon el-icon-location"}),t._v("概述")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/cluster"}},[a("span",{staticClass:"title-icon el-icon-menu"}),t._v("集群")])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/apis"}},[a("span",{staticClass:"title-icon el-icon-share"}),t._v("接口")])],1)])]),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var m=a("VU/8")({name:"App",data:function(){return{}}},p,!1,function(t){a("BQSP")},"data-v-00dfd8f1",null).exports,h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-main",[e("div",{staticClass:"main_title"},[e("i",{staticClass:"el-icon-menu"}),this._v(" 数据统计")]),this._v(" "),e("el-row",{staticClass:"main_data",attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple"})]),this._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple"})]),this._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple"})]),this._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"grid-content bg-purple"})])],1),this._v(" "),e("div",{staticClass:"main_title"},[e("i",{staticClass:"el-icon-menu"}),this._v(" 组件支持")])],1)},staticRenderFns:[]};var v=a("VU/8")({name:"App",data:function(){return{}}},h,!1,function(t){a("wHnb")},"data-v-51fe4a23",null).exports,_={name:"App",data:function(){return{dialogCluster:!1,dialogDelete:!1,form:{id:0,name:"",loadBalance:""},rules:{name:[{required:!0,message:"请填写集群名称",trigger:"change"},{min:5,max:20,message:"集群名称长度 5 - 20",trigger:"change"}],loadBalance:[{required:!0,message:"请设置负载均衡算法",trigger:"change"},{type:"number",min:1,max:1,validator:function(t,e,a){0!=e?a(new Error("目前仅支持RoundRobin算法,默认填写 0")):a()},message:"请填写对应的算法数值",trigger:"change"}]},tableData:[]}},created:function(){this.init()},methods:{init:function(){var t=this;d().then(function(e){t.tableData=e.data.data})},handleCluster:function(t,e){t||e?(this.form=e,this.dialogCluster=!0):this.dialogCluster=!0},handleClose:function(t){this.dialogCluster=!1,this.form={id:0,name:"",loadBalance:""},this.$refs[t].resetFields()},create:function(t){var e=this;0===t.id&&delete t.id,function(t){return u({url:"v1/clusters",method:"PUT",data:t})}(t).then(function(a){0===a.data.code?(e.form={id:0,name:"",loadBalance:""},e.dialogCluster=!1,e.init(),e.$message({message:0===t.id?"新增集群成功":"更新集群成功",type:"success"})):e.$message.error(0===t.id?"新增集群成功":"更新集群失败")})},handleDelete:function(t,e){var a=this;this.$confirm("是否确定删除?","删除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t=e.id,u({url:"v1/clusters/"+t,method:"DELETE"})).then(function(t){0===t.data.code?(a.dialogDelete=!1,a.init(),a.$message({message:"集群删除成功",type:"success"})):(a.dialogDelete=!1,a.$message.error("集群删除失败"))})}).catch(function(){})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.create(e.form)})}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.handleCluster()}}},[t._v("新增集群")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"ID",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.id)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"集群名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"负载均衡算法"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.loadBalance?"RoundRobin":"IPHash"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"}},[a("router-link",{attrs:{to:{name:"ClusterServer",params:{id:e.row.id}}}},[t._v("服务")])],1),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleCluster(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:0==t.form.id?"新增集群":"更新集群",visible:t.dialogCluster,width:"30%","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogCluster=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"集群名称",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入集群名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"负载均衡算法(RoundRobin=0,IPHash=1)",prop:"loadBalance"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入负载均衡算法,默认 0"},model:{value:t.form.loadBalance,callback:function(e){t.$set(t.form,"loadBalance",t._n(e))},expression:"form.loadBalance"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.handleClose("form")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(_,b,!1,function(t){a("ZSWO")},"data-v-ff86f51e",null).exports,k={name:"App",data:function(){return{dialogServer:!1,dialogDelete:!1,ClustersId:0,clustersData:[],tableData:[],form:{id:0,addr:"",protocol:"",maxQPS:"",heathCheck:{path:"",checkInterval:"",timeout:""},circuitBreaker:{closeTimeout:"",halfTrafficRate:"",rateCheckPeriod:"",failureRateToClose:"",succeedRateToOpen:""}},rules:{addr:[{required:!0,message:"请输入服务地址",trigger:"change"},{min:5,max:255,message:"长度请控制在 5 - 255",trigger:"change"}],protocol:[{required:!0,message:"请设置服务接口协议",trigger:"change"},{type:"number",min:1,max:1,validator:function(t,e,a){0!=e?a(new Error("目前仅支持HTTP协议,默认填写 0")):a()},message:"目前仅支持HTTP，请填写0",trigger:"change"}],maxQPS:[{required:!0,message:"请设置服务最大允许QPS",trigger:"change"},{type:"number",min:0,max:1,validator:function(t,e,a){0==e?a(new Error("不能为0")):a()},message:"数值必须大于0",trigger:"change"}]}}},created:function(){this.ClustersId=this.$route.params.id,this.init()},methods:{init:function(){var t,e=this;(t=this.ClustersId,u({url:"v1/clusters/"+t,method:"GET"})).then(function(t){e.clustersData=t.data.data}),function(t){return u({url:"v1/clusters/"+t+"/binds",method:"GET"})}(this.ClustersId).then(function(t){var a=[],l={id:"",info:""};null!=(t=t.data.data)&&t.forEach(function(t,e){var r;l.id=t,a[e]=l,(r=t,u({url:"v1/servers/"+r,method:"GET"})).then(function(t){a[e].info=t.data.data}),l={id:"",info:""}}),e.tableData=a})},handleServer:function(t,e){t||e?(this.form=e,this.dialogServer=!0):this.dialogServer=!0},handleClose:function(t){this.dialogServer=!1,this.form={id:0,addr:"",protocol:"",maxQPS:"",heathCheck:{path:"",checkInterval:"",timeout:""},circuitBreaker:{closeTimeout:"",halfTrafficRate:"",rateCheckPeriod:"",failureRateToClose:"",succeedRateToOpen:""}},this.$refs[t].resetFields()},handleDelete:function(t,e){var a=this;this.$confirm("是否确定删除?","删除",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t=e.id,u({url:"v1/servers/"+t,method:"DELETE"})).then(function(t){var l;0===t.data.code?(a.dialogDelete=!1,(l={clusterID:Number(a.ClustersId),serverID:e.id},u({url:"v1/binds",method:"DELETE",data:l})).then(function(t){}),a.init(),a.$message({message:"服务删除成功",type:"success"})):(a.dialogDelete=!1,a.$message.error("服务删除失败"))})}).catch(function(){})},create:function(t){var e=this;0==t.id&&delete t.id,function(t){return u({url:"v1/servers",method:"PUT",data:t})}(t).then(function(a){0==a.data.code?(e.form={id:0,addr:"",protocol:"",maxQPS:"",heathCheck:{path:"",checkInterval:"",timeout:""},circuitBreaker:{closeTimeout:"",halfTrafficRate:"",rateCheckPeriod:"",failureRateToClose:"",succeedRateToOpen:""}},e.dialogServer=!1,function(t){return u({url:"v1/binds",method:"PUT",data:t})}({clusterID:Number(e.ClustersId),serverID:a.data.data}).then(function(t){}),e.init(),e.$message({message:0===t.id?"新增服务成功":"更新服务成功",type:"success"})):e.$message.error(0===t.id?"新增服务失败":"更新服务失败")})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.create(e.form)})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"demonstration h_title"},[t._v("集群服务管理："),a("font",[t._v(t._s(t.clustersData.name))])],1),t._v(" "),a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.handleServer()}}},[t._v("新增服务")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"ID",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"服务地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.info.addr))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接口协议"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.info.protocol?"HTTP":"Unknown"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最大QPS"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.info.maxQPS))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"健康检查机制"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"240",trigger:"hover",content:JSON.stringify(t.row.info.heathCheck),"popper-class":"popper_class"}},[a("i",{staticClass:"el-icon-search",attrs:{slot:"reference"},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"熔断规则"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"240",trigger:"hover",content:JSON.stringify(t.row.info.circuitBreaker),"popper-class":"popper_class"}},[a("i",{staticClass:"el-icon-search",attrs:{slot:"reference"},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleServer(e.$index,e.row.info)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row.info)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:0==t.form.id?"新增服务":"更新服务",visible:t.dialogServer,width:"30%","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.dialogServer=e}}},[a("el-form",{ref:"form",staticClass:"el-form--label-top",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"服务地址",prop:"addr"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入服务地址,例如127.0.0.1:8081"},model:{value:t.form.addr,callback:function(e){t.$set(t.form,"addr",e)},expression:"form.addr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务接口协议(HTTP=0,Grpc=1,Dubbo=1,SpringCloud=2)",prop:"protocol"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入接口协议,目前仅支持HTTP"},model:{value:t.form.protocol,callback:function(e){t.$set(t.form,"protocol",t._n(e))},expression:"form.protocol"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最大QPS",prop:"maxQPS"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请设置最大QPS（不能为0）"},model:{value:t.form.maxQPS,callback:function(e){t.$set(t.form,"maxQPS",t._n(e))},expression:"form.maxQPS"}})],1),t._v(" "),a("el-form-item",{staticClass:"el-col-s",attrs:{label:"健康检测机制"}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"检测路径，如/ping"},model:{value:t.form.heathCheck.path,callback:function(e){t.$set(t.form.heathCheck,"path",e)},expression:"form.heathCheck.path"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"检查间隔时间（纳秒）"},model:{value:t.form.heathCheck.checkInterval,callback:function(e){t.$set(t.form.heathCheck,"checkInterval",t._n(e))},expression:"form.heathCheck.checkInterval"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"检查超时时间（纳秒）"},model:{value:t.form.heathCheck.timeout,callback:function(e){t.$set(t.form.heathCheck,"timeout",t._n(e))},expression:"form.heathCheck.timeout"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"el-col-s",attrs:{label:"熔断规则"}},[a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{"auto-complete":"off",placeholder:"关闭检查间隔时间（纳秒）"},model:{value:t.form.circuitBreaker.closeTimeout,callback:function(e){t.$set(t.form.circuitBreaker,"closeTimeout",t._n(e))},expression:"form.circuitBreaker.closeTimeout"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{"margin-bottom":"10px",width:"247px"},attrs:{"auto-complete":"off",placeholder:"熔断器检查周期（纳秒）"},model:{value:t.form.circuitBreaker.rateCheckPeriod,callback:function(e){t.$set(t.form.circuitBreaker,"rateCheckPeriod",t._n(e))},expression:"form.circuitBreaker.rateCheckPeriod"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"half限流，0-100"},model:{value:t.form.circuitBreaker.halfTrafficRate,callback:function(e){t.$set(t.form.circuitBreaker,"halfTrafficRate",t._n(e))},expression:"form.circuitBreaker.halfTrafficRate"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"Close限流，0-100"},model:{value:t.form.circuitBreaker.failureRateToClose,callback:function(e){t.$set(t.form.circuitBreaker,"failureRateToClose",t._n(e))},expression:"form.circuitBreaker.failureRateToClose"}})],1),t._v(" "),a("div",{staticClass:"line el-col el-col-05"},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"Open限流，0-100"},model:{value:t.form.circuitBreaker.succeedRateToOpen,callback:function(e){t.$set(t.form.circuitBreaker,"succeedRateToOpen",t._n(e))},expression:"form.circuitBreaker.succeedRateToOpen"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.handleClose("form")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var C=a("VU/8")(k,x,!1,function(t){a("Zh7J")},"data-v-88d7a694",null).exports,y={name:"App",data:function(){return{tableData:[]}},created:function(){this.init()},methods:{init:function(){var t=this;u({url:"v1/apis",method:"GET"}).then(function(e){t.tableData=e.data.data})},handleDelete:function(t,e){var a=this;this.$confirm("是否确定删除?","删除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t=e.id,u({url:"v1/apis/"+t,method:"DELETE"})).then(function(t){0===t.data.code?(a.init(),a.$message({message:"接口删除成功",type:"success"})):a.$message.error("接口删除失败")})}).catch(function(){})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-plus"}},[a("router-link",{attrs:{to:"/apis/add"}},[t._v("新增接口")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"ID",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接口名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"URL匹配模式"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.urlPattern))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"请求类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.method))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接口聚合"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.nodes.length))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开关状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.status?"关闭中":"正常"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"}},[a("router-link",{staticClass:"edit_color",attrs:{to:{name:"ApisEdit",params:{id:e.row.id}}}},[t._v("编辑")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var D=a("VU/8")(y,w,!1,function(t){a("7df6")},"data-v-057de30c",null).exports,T={name:"App",data:function(){return{ip:{whitelist:"",blacklist:""},clustersData:[],form:{name:"",urlPattern:"",method:"*",domain:"",status:!1,ipAccessControl:{whitelist:[],blacklist:[]},defaultValue:{body:"eyJjb2RlIjoyMDAsImRhdGEiOiIiLCJtc2ciOiLmnI3liqHlvILluLjvvIzor7fph43mlrDlsJ3or5UifQ==",headers:[{name:"Location",value:""}],cookies:[]},nodes:[{clusterID:"",urlRewrite:"",attrName:"",validations:[{parameter:{name:"",source:"",index:0},required:!1,rules:[]}],defaultValue:{code:200,body:"eyJjb2RlIjoyMDAsImRhdGEiOiIiLCJtc2ciOiLmnI3liqHlvILluLjvvIzor7fph43mlrDlsJ3or5UifQ==",headers:[{name:"Location",value:""}]}}],authFilter:"CUSTOM_JWT",renderTemplate:{objects:[{name:"",attrs:[{name:"",extractExp:""}],flatAttrs:!0}]},useDefault:!1,matchRule:0,position:0},rules:{name:[{required:!0,message:"请填写接口名称",trigger:"change"}],urlPattern:[{required:!0,message:"请填写接口URL匹配模式",trigger:"change"}],"defaultValue.body":[{required:!0,message:"请填写接口默认返回值",trigger:"change"}],authFilter:[{required:!0,message:"请填写Auth插件名称,默认CUSTOM_JWT",trigger:"change"}]}}},created:function(){this.init()},methods:{init:function(){var t=this;d().then(function(e){t.clustersData=e.data.data})},ADD_IP:function(t){""!=this.ip.blacklist&&"blacklist"==t&&(this.form.ipAccessControl.blacklist.push(this.ip.blacklist),this.ip.blacklist=""),""!=this.ip.whitelist&&"whitelist"==t&&(this.form.ipAccessControl.whitelist.push(this.ip.whitelist),this.ip.whitelist="")},DEL_IP:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){"blacklist"==t&&a.form.ipAccessControl.blacklist.splice(e,1),"whitelist"==t&&a.form.ipAccessControl.whitelist.splice(e,1)}).catch(function(){})},ADD_JIEDIAN:function(){this.form.nodes.push({clusterID:"",urlRewrite:"",attrName:"",validations:[{parameter:{name:"",source:"",index:0},required:!1,rules:[]}],defaultValue:{code:200,body:"",headers:[{name:"Location",value:""}]}})},DEL_JIEDIAN:function(t){var e=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){e.form.nodes.splice(t,1)}).catch(function(){})},ADD_PRIMARY:function(t){this.form.nodes[t].validations.push({parameter:{name:"",source:"",index:0},required:!1,rules:[]})},DEL_PRIMARY:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){a.form.nodes[t].validations.splice(e,1)}).catch(function(){})},ADD_ATTR:function(t){this.form.renderTemplate.objects[t].attrs.push({name:"",extractExp:""})},DEL_ATTR:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){a.form.renderTemplate.objects[t].attrs.splice(e,1)}).catch(function(){})},create:function(t){var e=this;t.status?t.status=1:t.status=0,1==this.form.nodes.length&&delete this.form.renderTemplate,this.form.nodes.forEach(function(t,e){""==t.defaultValue.headers[0].value&&delete t.defaultValue.headers,0==t.validations.length&&delete t.validations}),""==this.form.defaultValue.headers[0].value&&delete this.form.defaultValue.headers,f(t).then(function(a){0===a.data.code?(history.go(-1),e.$message({message:0===t.id?"新增接口成功":"更新接口成功",type:"success"})):e.$message.error(0===t.id?"新增接口失败":"更新接口失败")})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.create(e.form)})}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("el-form",{ref:"form",staticClass:"el-col el-col-9 min_top",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{"auto-complete":"off",placeholder:"请输入接口名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口URL匹配模式",prop:"urlPattern"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入接口URL匹配模式，正则表达式，如：^/api/users/(\\\\d+)$"},model:{value:t.form.urlPattern,callback:function(e){t.$set(t.form,"urlPattern",e)},expression:"form.urlPattern"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口请求类型"}},[a("el-radio-group",{model:{value:t.form.method,callback:function(e){t.$set(t.form,"method",e)},expression:"form.method"}},[a("el-radio",{attrs:{label:"*"}}),t._v(" "),a("el-radio",{attrs:{label:"GET"}}),t._v(" "),a("el-radio",{attrs:{label:"POST"}}),t._v(" "),a("el-radio",{attrs:{label:"PUT"}}),t._v(" "),a("el-radio",{attrs:{label:"DELETE"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"接口默认返回值",prop:"defaultValue.body"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"当后端Cluster无可用Server的时候，返回默认值(json格式BASE64数据)"},model:{value:t.form.defaultValue.body,callback:function(e){t.$set(t.form.defaultValue,"body",e)},expression:"form.defaultValue.body"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Auth插件名称",prop:"authFilter"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"指定该API所使用的Auth插件名称，例如：CUSTOM_JWT"},model:{value:t.form.authFilter,callback:function(e){t.$set(t.form,"authFilter",e)},expression:"form.authFilter"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"接口IP的访问控制"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"line-height":"30px",color:"#999999"}},[t._v("IP白名单")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.ip.whitelist,callback:function(e){t.$set(t.ip,"whitelist",e)},expression:"ip.whitelist"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){t.ADD_IP("whitelist")}},slot:"append"},[t._v("添加")])],1)],1),t._v(" "),t._l(t.form.ipAccessControl.whitelist,function(e,l){return a("div",{key:l,staticClass:"text item"},[t._v(t._s(e)+" "),a("span",{staticStyle:{float:"right",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_IP("whitelist",l)}}},[t._v("移除")])])})],2)],1)]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"line-height":"30px",color:"#999999"}},[t._v("IP黑名单")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.ip.blacklist,callback:function(e){t.$set(t.ip,"blacklist",e)},expression:"ip.blacklist"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){t.ADD_IP("blacklist")}},slot:"append"},[t._v("添加")])],1)],1),t._v(" "),t._l(t.form.ipAccessControl.blacklist,function(e,l){return a("div",{key:l,staticClass:"text item"},[t._v(t._s(e)+" "),a("span",{staticStyle:{float:"right",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_IP("blacklist",l)}}},[t._v("移除")])])})],2)],1)])],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"接口聚合"}},[a("el-row",{staticStyle:{width:"900px"}},t._l(t.form.nodes,function(e,l){return a("div",{key:l,staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"title_t"},[t._v("接口 "+t._s(l+1)+" "),l>0?a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_JIEDIAN(l)}}},[t._v("移除节点")]):t._e()]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple",attrs:{prop:"item.clusterID"}},[a("el-select",{staticClass:"el-col-24",attrs:{placeholder:"请选择集群"},model:{value:e.clusterID,callback:function(a){t.$set(e,"clusterID",t._n(a))},expression:"item.clusterID"}},t._l(t.clustersData,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"grid-content bg-purple-light"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入节点标示名,例如：user"},model:{value:e.attrName,callback:function(a){t.$set(e,"attrName",a)},expression:"item.attrName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入URL重写规则，例如：/users?id=$1"},model:{value:e.urlRewrite,callback:function(a){t.$set(e,"urlRewrite",a)},expression:"item.urlRewrite"}})],1)]),t._v(" "),a("el-col",[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"0 5px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"当节点不可用的时候，返回默认值"},model:{value:e.defaultValue.body,callback:function(a){t.$set(e.defaultValue,"body",a)},expression:"item.defaultValue.body"}})],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("div",{staticClass:"dark_mina"},[a("div",{staticClass:"dark_mina_title"},[t._v("参数集 "),a("el-row",{staticClass:"add_parameter",attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-plus",on:{click:function(e){t.ADD_PRIMARY(l)}}},[t._v("增加参数")])])],1),t._v(" "),t._l(e.validations,function(e,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"参数名，例如：name"},model:{value:e.parameter.name,callback:function(a){t.$set(e.parameter,"name",a)},expression:"validations.parameter.name"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-select",{attrs:{placeholder:"请选择参数数据源"},model:{value:e.parameter.source,callback:function(a){t.$set(e.parameter,"source",t._n(a))},expression:"validations.parameter.source"}},[a("el-option",{attrs:{label:"QueryString",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"FormData",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"JSONBody",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"Header",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"Cookie",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"PathValue",value:"5"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"PathValue分割索引"},model:{value:e.parameter.index,callback:function(a){t.$set(e.parameter,"index",t._n(a))},expression:"validations.parameter.index"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox-group",{staticStyle:{color:"#666666"},model:{value:e.required,callback:function(a){t.$set(e,"required",a)},expression:"validations.required"}},[a("el-checkbox",{attrs:{label:"是否必须",name:"type"}}),t._v(" "),r>0?a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_PRIMARY(l,r)}}},[t._v("移除参数")]):t._e()],1)],1)],1)])],1)})],2)])])],1)],1)],1)})),t._v(" "),a("el-col",[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"0 5px","text-align":"right",width:"890px"}},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.ADD_JIEDIAN()}}},[t._v("新增节点")])],1)])],1),t._v(" "),t.form.nodes.length>1?a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"聚合数据集"}},[a("el-row",{staticStyle:{width:"700px"}},[a("div",{staticClass:"grid-content"},t._l(t.form.renderTemplate.objects,function(e,l){return a("el-card",{key:l,staticClass:"box-card bg-purple-dark"},[a("el-form-item",[a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.ADD_ATTR(l)}}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加字段")])]),t._v(" "),t._l(e.attrs,function(e,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"5px 0"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入字段名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"items.name"}})],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-input",{staticStyle:{width:"350px"},attrs:{"auto-complete":"off",placeholder:"请输入字段对应数据路径"},model:{value:e.extractExp,callback:function(a){t.$set(e,"extractExp",a)},expression:"items.extractExp"}}),t._v(" "),r>0?a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_ATTR(l,r)}}},[t._v("移除字段")]):t._e()],1)])],1)})],2)}))])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"状态开关",prop:"status"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#f1f1f1"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("form")}}},[t._v("确定")]),t._v(" "),a("el-button",[a("router-link",{attrs:{to:"/apis"}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(T,S,!1,function(t){a("t+aC")},"data-v-0651f5e2",null).exports,$={name:"App",data:function(){return{ip:{whitelist:"",blacklist:""},clustersData:[],form:{id:0,name:"",urlPattern:"",method:"*",domain:"",status:!1,ipAccessControl:{whitelist:[],blacklist:[]},defaultValue:{body:"eyJjb2RlIjoyMDAsImRhdGEiOiIiLCJtc2ciOiLmnI3liqHlvILluLjvvIzor7fph43mlrDlsJ3or5UifQ==",headers:[{name:"Location",value:""}],cookies:[]},nodes:[{clusterID:"",urlRewrite:"",attrName:"",validations:[],defaultValue:{code:200,body:"eyJjb2RlIjoyMDAsImRhdGEiOiIiLCJtc2ciOiLmnI3liqHlvILluLjvvIzor7fph43mlrDlsJ3or5UifQ==",headers:[{name:"Location",value:""}]}}],authFilter:"CUSTOM_JWT",renderTemplate:{objects:[{name:"",attrs:[{name:"",extractExp:""}],flatAttrs:!0}]},useDefault:!1,matchRule:0,position:0},rules:{name:[{required:!0,message:"请填写接口名称",trigger:"change"}],urlPattern:[{required:!0,message:"请填写接口URL匹配模式",trigger:"change"}],"defaultValue.body":[{required:!0,message:"请填写接口默认返回值",trigger:"change"}],authFilter:[{required:!0,message:"请填写Auth插件名称,默认CUSTOM_JWT",trigger:"change"}]}}},created:function(){this.form.id=this.$route.params.id,this.init()},methods:{init:function(){var t,e=this;d().then(function(t){e.clustersData=t.data.data}),(t=this.form.id,u({url:"v1/apis/"+t,method:"GET"})).then(function(t){1==t.data.data.status?t.data.data.status=!0:t.data.data.status=!1,t.data.data.ipAccessControl.blacklist||(t.data.data.ipAccessControl.blacklist=[]),t.data.data.ipAccessControl.whitelist||(t.data.data.ipAccessControl.whitelist=[]),t.data.data.defaultValue.headers||(t.data.data.defaultValue.headers=[],t.data.data.defaultValue.headers[0]={name:"Location",value:""}),t.data.data.nodes.forEach(function(t,e){t.defaultValue.headers||(t.defaultValue.headers=[],t.defaultValue.headers[0]={name:"Location",value:""}),t.validations||(t.validations=[])}),t.data.data.renderTemplate||(t.data.data.renderTemplate={objects:[{name:"",attrs:[{name:"",extractExp:""}],flatAttrs:!0}]}),t.data.data.renderTemplate.objects||(t.data.data.renderTemplate.objects=[],t.data.data.renderTemplate.objects[0]={name:"",attrs:[{name:"",extractExp:""}],flatAttrs:!0}),t.data.data.renderTemplate.objects[0].attrs||(t.data.data.renderTemplate.objects[0].attrs=[]),e.form=t.data.data,console.log(e.form)})},ADD_IP:function(t){""!=this.ip.blacklist&&"blacklist"==t&&(this.form.ipAccessControl.blacklist.push(this.ip.blacklist),this.ip.blacklist=""),""!=this.ip.whitelist&&"whitelist"==t&&(this.form.ipAccessControl.whitelist.push(this.ip.whitelist),this.ip.whitelist=""),console.log(this.form)},DEL_IP:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){"blacklist"==t&&a.form.ipAccessControl.blacklist.splice(e,1),"whitelist"==t&&a.form.ipAccessControl.whitelist.splice(e,1)}).catch(function(){})},ADD_JIEDIAN:function(){this.form.nodes.push({clusterID:"",urlRewrite:"",attrName:"",validations:[{parameter:{name:"",source:"",index:0},required:!1,rules:[]}],defaultValue:{code:200,body:"",headers:[{name:"Location",value:""}]}})},DEL_JIEDIAN:function(t){var e=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){e.form.nodes.splice(t,1)}).catch(function(){})},ADD_PRIMARY:function(t){this.form.nodes[t].validations.push({parameter:{name:"",source:"",index:0},required:!1,rules:[]})},DEL_PRIMARY:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){a.form.nodes[t].validations.splice(e,1)}).catch(function(){})},ADD_ATTR:function(t){this.form.renderTemplate.objects[t].attrs.push({name:"",extractExp:""})},DEL_ATTR:function(t,e){var a=this;this.$confirm("是否确定移除?","移除操作",{confirmButtonText:"确定",confirmButtonClass:"el-button--danger",cancelButtonText:"取消",type:"warning"}).then(function(){a.form.renderTemplate.objects[t].attrs.splice(e,1)}).catch(function(){})},create:function(t){var e=this;t.status?t.status=1:t.status=0,1==this.form.nodes.length&&delete this.form.renderTemplate,""==this.form.defaultValue.headers[0].value&&(this.form.defaultValue.headers=[]),this.form.nodes.forEach(function(t,e){""==t.defaultValue.headers[0].value&&(t.defaultValue.headers=[])}),f(t).then(function(a){0===a.data.code?(history.go(-1),e.$message({message:0===t.id?"新增接口成功":"更新接口成功",type:"success"})):e.$message.error(0===t.id?"新增接口失败":"更新接口失败")})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.create(e.form)})}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-main",[a("el-form",{ref:"form",staticClass:"el-col el-col-9 min_top",attrs:{model:t.form,rules:t.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{"auto-complete":"off",placeholder:"请输入接口名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口URL匹配模式",prop:"urlPattern"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入接口URL匹配模式，正则表达式，如：^/api/users/(\\\\d+)$"},model:{value:t.form.urlPattern,callback:function(e){t.$set(t.form,"urlPattern",e)},expression:"form.urlPattern"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口请求类型"}},[a("el-radio-group",{model:{value:t.form.method,callback:function(e){t.$set(t.form,"method",e)},expression:"form.method"}},[a("el-radio",{attrs:{label:"*"}}),t._v(" "),a("el-radio",{attrs:{label:"GET"}}),t._v(" "),a("el-radio",{attrs:{label:"POST"}}),t._v(" "),a("el-radio",{attrs:{label:"PUT"}}),t._v(" "),a("el-radio",{attrs:{label:"DELETE"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"接口默认返回值",prop:"defaultValue.body"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"当后端Cluster无可用Server的时候，返回默认值(json格式BASE64数据)"},model:{value:t.form.defaultValue.body,callback:function(e){t.$set(t.form.defaultValue,"body",e)},expression:"form.defaultValue.body"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Auth插件名称",prop:"authFilter"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"指定该API所使用的Auth插件名称，例如：CUSTOM_JWT"},model:{value:t.form.authFilter,callback:function(e){t.$set(t.form,"authFilter",e)},expression:"form.authFilter"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"接口IP的访问控制"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"line-height":"30px",color:"#999999"}},[t._v("IP白名单")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.ip.whitelist,callback:function(e){t.$set(t.ip,"whitelist",e)},expression:"ip.whitelist"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){t.ADD_IP("whitelist")}},slot:"append"},[t._v("添加")])],1)],1),t._v(" "),t._l(t.form.ipAccessControl.whitelist,function(e,l){return a("div",{key:l,staticClass:"text item"},[t._v(t._s(e)+" "),a("span",{staticStyle:{float:"right",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_IP("whitelist",l)}}},[t._v("移除")])])})],2)],1)]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"line-height":"30px",color:"#999999"}},[t._v("IP黑名单")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.ip.blacklist,callback:function(e){t.$set(t.ip,"blacklist",e)},expression:"ip.blacklist"}},[a("el-button",{attrs:{slot:"append"},on:{click:function(e){t.ADD_IP("blacklist")}},slot:"append"},[t._v("添加")])],1)],1),t._v(" "),t._l(t.form.ipAccessControl.blacklist,function(e,l){return a("div",{key:l,staticClass:"text item"},[t._v(t._s(e)+" "),a("span",{staticStyle:{float:"right",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_IP("blacklist",l)}}},[t._v("移除")])])})],2)],1)])],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"接口聚合"}},[a("el-row",{staticStyle:{width:"900px"}},t._l(t.form.nodes,function(e,l){return a("div",{key:l,staticClass:"grid-content"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"title_t"},[t._v("接口 "+t._s(l+1)+" "),l>0?a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_JIEDIAN(l)}}},[t._v("移除节点")]):t._e()]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple",attrs:{prop:"item.clusterID"}},[a("el-select",{staticClass:"el-col-24",attrs:{placeholder:"请选择集群"},model:{value:e.clusterID,callback:function(a){t.$set(e,"clusterID",t._n(a))},expression:"item.clusterID"}},t._l(t.clustersData,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"grid-content bg-purple-light"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入节点标示名,例如：user"},model:{value:e.attrName,callback:function(a){t.$set(e,"attrName",a)},expression:"item.attrName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入URL重写规则，例如：/users?id=$1"},model:{value:e.urlRewrite,callback:function(a){t.$set(e,"urlRewrite",a)},expression:"item.urlRewrite"}})],1)]),t._v(" "),a("el-col",[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"0 5px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"当节点不可用的时候，返回默认值"},model:{value:e.defaultValue.body,callback:function(a){t.$set(e.defaultValue,"body",a)},expression:"item.defaultValue.body"}})],1)])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[a("div",{staticClass:"dark_mina"},[a("div",{staticClass:"dark_mina_title"},[t._v("参数集 "),a("el-row",{staticClass:"add_parameter",attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-plus",on:{click:function(e){t.ADD_PRIMARY(l)}}},[t._v("增加参数")])])],1),t._v(" "),t._l(e.validations,function(e,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"参数名，例如：name"},model:{value:e.parameter.name,callback:function(a){t.$set(e.parameter,"name",a)},expression:"validations.parameter.name"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-select",{attrs:{placeholder:"请选择参数数据源"},model:{value:e.parameter.source,callback:function(a){t.$set(e.parameter,"source",t._n(a))},expression:"validations.parameter.source"}},[a("el-option",{attrs:{label:"QueryString",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"FormData",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"JSONBody",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"Header",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"Cookie",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"PathValue",value:"5"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"PathValue分割索引"},model:{value:e.parameter.index,callback:function(a){t.$set(e.parameter,"index",t._n(a))},expression:"validations.parameter.index"}})],1)]),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox-group",{staticStyle:{color:"#666666"},model:{value:e.required,callback:function(a){t.$set(e,"required",a)},expression:"validations.required"}},[a("el-checkbox",{attrs:{label:"是否必须",name:"type"}}),t._v(" "),a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_PRIMARY(l,r)}}},[t._v("移除参数")])],1)],1)],1)])],1)})],2)])])],1)],1)],1)})),t._v(" "),a("el-col",[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"0 5px","text-align":"right",width:"890px"}},[a("el-button",{staticClass:"add",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.ADD_JIEDIAN()}}},[t._v("新增节点")])],1)])],1),t._v(" "),t.form.nodes.length>1?a("el-form-item",{staticStyle:{width:"800px"},attrs:{label:"聚合数据集"}},[a("el-row",{staticStyle:{width:"700px"}},[a("div",{staticClass:"grid-content"},t._l(t.form.renderTemplate.objects,function(e,l){return a("el-card",{key:l,staticClass:"box-card bg-purple-dark"},[a("el-form-item",[a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.ADD_ATTR(l)}}},[a("i",{staticClass:"el-icon-plus"}),t._v("添加字段")])]),t._v(" "),t._l(e.attrs,function(e,r){return a("el-row",{key:r},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple",staticStyle:{padding:"5px 0"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入字段名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"items.name"}})],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-input",{staticStyle:{width:"350px"},attrs:{"auto-complete":"off",placeholder:"请输入字段对应数据路径"},model:{value:e.extractExp,callback:function(a){t.$set(e,"extractExp",a)},expression:"items.extractExp"}}),t._v(" "),r>0?a("a",{staticStyle:{float:"right","font-size":"12px",color:"#999999",cursor:"pointer"},on:{click:function(e){t.DEL_ATTR(l,r)}}},[t._v("移除字段")]):t._e()],1)])],1)})],2)}))])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"状态开关",prop:"status"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#f1f1f1"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("form")}}},[t._v("确定")]),t._v(" "),a("el-button",[a("router-link",{attrs:{to:"/apis"}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")($,A,!1,function(t){a("xZGO")},"data-v-0026b3ae",null).exports;l.default.use(n.a);var E=new n.a({routes:[{path:"/",component:m,children:[{path:"",name:"index",component:v},{path:"/cluster",name:"Cluster",component:g},{path:"/cluster/server/:id",name:"ClusterServer",component:C},{path:"/apis",name:"Apis",component:D},{path:"/apis/add",name:"ApisAdd",component:I},{path:"/apis/edit/:id",name:"ApisEdit",component:R}]}]});l.default.config.productionTip=!1,l.default.use(o.a),new l.default({el:"#app",router:E,render:function(t){return t(s)}})},ZSWO:function(t,e){},Zh7J:function(t,e){},kTnO:function(t,e){},"t+aC":function(t,e){},tvR6:function(t,e){},wHnb:function(t,e){},xZGO:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.068e0eacd55f0291cff6.js.map